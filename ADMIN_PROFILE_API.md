# API –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <your_jwt_token>
```

## üëë Endpoints –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### GET /profiles/admin
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `ADMIN`
- JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "profile_id",
  "userId": "user_id",
  "firstName": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
  "lastName": "–°–∏—Å—Ç–µ–º—ã",
  "position": "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
  "department": "IT",
  "phone": "+7 (999) 123-45-67",
  "avatarId": null,
  "permissions": null,
  "createdAt": "2025-10-18T16:49:17.000Z",
  "updatedAt": "2025-10-18T16:49:17.000Z",
  "user": {
    "id": "user_id",
    "email": "admin@example.com",
    "role": "ADMIN"
  },
  "avatar": null
}
```

### PATCH /profiles/admin
–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "firstName": "–ì–ª–∞–≤–Ω—ã–π",
  "lastName": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
  "position": "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
  "department": "IT –æ—Ç–¥–µ–ª",
  "phone": "+7 (999) 123-45-67"
}
```

**–û—Ç–≤–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üõ°Ô∏è Endpoints –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤

### GET /profiles/moderator
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `MODERATOR`
- JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "profile_id",
  "userId": "user_id",
  "firstName": "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä",
  "lastName": "–ö–æ–Ω—Ç–µ–Ω—Ç–∞",
  "position": "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä",
  "department": "–ú–æ–¥–µ—Ä–∞—Ü–∏—è",
  "phone": null,
  "avatarId": null,
  "permissions": null,
  "createdAt": "2025-10-18T16:49:17.000Z",
  "updatedAt": "2025-10-18T16:49:17.000Z",
  "user": {
    "id": "user_id",
    "email": "moderator@example.com",
    "role": "MODERATOR"
  },
  "avatar": null
}
```

### PATCH /profiles/moderator
–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "firstName": "–°—Ç–∞—Ä—à–∏–π",
  "lastName": "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä",
  "position": "–í–µ–¥—É—â–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä",
  "department": "–ö–æ–Ω—Ç–µ–Ω—Ç-–º–æ–¥–µ—Ä–∞—Ü–∏—è",
  "phone": "+7 (999) 987-65-43"
}
```

**–û—Ç–≤–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

## üîí –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

### –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞:

**403 Forbidden** - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å:
```json
{
  "statusCode": 403,
  "message": "Only ADMIN users can access admin profile"
}
```

**401 Unauthorized** - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω:
```json
{
  "statusCode": 401,
  "message": "Unauthorized"
}
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3000/profiles/admin
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```bash
curl -X PATCH \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"firstName": "–ì–ª–∞–≤–Ω—ã–π", "lastName": "–ê–¥–º–∏–Ω"}' \
  http://localhost:3000/profiles/admin
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3000/profiles/moderator
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö endpoints:

```bash
node test-admin-endpoints.js
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ** - —Ç–æ–ª—å–∫–æ ADMIN –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å `/profiles/admin`
2. **–ü—Ä–æ—Ñ–∏–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
3. **–í—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
4. **–ê–≤–∞—Ç–∞—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è** —á–µ—Ä–µ–∑ –æ–±—â–∏–µ endpoints `/profiles/avatar/*`
5. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `permissions` (JSON)

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é `ADMIN` –∏–ª–∏ `MODERATOR` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Å –±–∞–∑–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

**AdminProfile:**
- firstName: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
- lastName: "–°–∏—Å—Ç–µ–º—ã"
- position: "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
- department: "IT"

**ModeratorProfile:**
- firstName: "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä"
- lastName: "–ö–æ–Ω—Ç–µ–Ω—Ç–∞"
- position: "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä"
- department: "–ú–æ–¥–µ—Ä–∞—Ü–∏—è"
