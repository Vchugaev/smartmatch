# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 1. **Multer –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`src/config/multer.config.ts`)
- **–ë—ã–ª–æ:** 10MB
- **–°—Ç–∞–ª–æ:** 50MB

```typescript
limits: {
  fileSize: 50 * 1024 * 1024, // 50MB
  files: 1, // –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª –∑–∞ —Ä–∞–∑
}
```

### 2. **Storage –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`src/modules/storage/storage.controller.ts`)
- **–ë—ã–ª–æ:** 10MB
- **–°—Ç–∞–ª–æ:** 50MB

```typescript
const maxFileSize = 50 * 1024 * 1024; // 50MB
```

### 3. **Main.ts** (`src/main.ts`)
- –î–æ–±–∞–≤–ª–µ–Ω middleware –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è timeout –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º:
  - `/profiles/avatar/upload`
  - `/storage/upload`

```typescript
app.use((req, res, next) => {
  if (req.url.includes('/profiles/avatar/upload') || req.url.includes('/storage/upload')) {
    req.setTimeout(300000); // 5 –º–∏–Ω—É—Ç
    res.setTimeout(300000); // 5 –º–∏–Ω—É—Ç
  }
  next();
});
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–º–µ—Ä–æ–º –¥–æ **50MB** –±–µ–∑ –æ—à–∏–±–∫–∏ "request entity too large".

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `POST /profiles/avatar/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
- `POST /storage/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ storage

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** 50MB
- **–¢–∏–ø —Ñ–∞–π–ª–æ–≤:** —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (`image/*`)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:** 1 —Ñ–∞–π–ª –∑–∞ —Ä–∞–∑
- **Timeout:** 5 –º–∏–Ω—É—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞
curl -X POST http://localhost:3000/profiles/avatar/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@large_image.jpg" # —Ñ–∞–π–ª –¥–æ 50MB
```

–¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫! üéâ
